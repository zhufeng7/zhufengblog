<!DOCTYPE html>
<html lang="en-us">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=4321&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>crewAI真是泰裤辣 - 珠峰</title>
    <meta property="og:title" content="crewAI真是泰裤辣 - 珠峰">
    
    <meta name="twitter:card" content="summary">

    
    
      
    

    
      
      <meta property="description" content="随着以ChatGPT为代表的大语言模型的走红，各大国外厂商目前在争夺大语言模型的市场份额。相较于国外，国内的大语言模型差得有点太远了。而我在这个领域的比较优势是：我比平均水平的人看得新东西多，技术了解得多，并且有一定的编程能力。我无法参与卷模型的赛道，不如直接将他们视为一种基础设施或者“积木”，只用最好的或者性价比高的。在现有大语言模型基础之上，做一些精彩的事情，不一定要赚钱，有趣就好，能满足我的 &amp;hellip;">
      <meta property="og:description" content="随着以ChatGPT为代表的大语言模型的走红，各大国外厂商目前在争夺大语言模型的市场份额。相较于国外，国内的大语言模型差得有点太远了。而我在这个领域的比较优势是：我比平均水平的人看得新东西多，技术了解得多，并且有一定的编程能力。我无法参与卷模型的赛道，不如直接将他们视为一种基础设施或者“积木”，只用最好的或者性价比高的。在现有大语言模型基础之上，做一些精彩的事情，不一定要赚钱，有趣就好，能满足我的 &amp;hellip;">
      
    

    
    
    

    

    
    


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/github.min.css">



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>
  <body class="post">
    <header class="masthead">
      <h1><a href="/">珠峰</a></h1>

<p class="tagline">&#34;经济&#34;是经世和济民</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">主页</a></li>
  
  <li><a href="/about/">关于我</a></li>
  
  <li><a href="/categories/">分类</a></li>
  
  <li><a href="/tags/">标签</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>crewAI真是泰裤辣</h1>



<h3>

珠峰






 / 
2024-03-11
</h3>

<hr>


      </header>





<h1 id="背景">背景</h1>
<p>随着以ChatGPT为代表的大语言模型的走红，各大国外厂商目前在争夺大语言模型的市场份额。相较于国外，国内的大语言模型差得有点太远了。而我在这个领域的比较优势是：我比平均水平的人看得新东西多，技术了解得多，并且有一定的编程能力。我无法参与卷模型的赛道，不如直接将他们视为一种基础设施或者“积木”，只用最好的或者性价比高的。在现有大语言模型基础之上，做一些精彩的事情，不一定要赚钱，有趣就好，能满足我的需求就好。</p>
<p>幸运的是，目前已有比较棒的项目来满足我“搭积木”的需求。例如<a href="https://www.langchain.com/">LangChain</a>,以及本篇的主角——<a href="https://www.crewai.com/">crewAI</a>。</p>
<h1 id="crewai是什么">crewAI是什么？</h1>
<p>这里我不做过多原理和代码上的解释，因为我自己也并没有特别深究，那应该是程序员该做的事，而我不是程序员，我只追求会用就好。</p>
<p>顾名思义，crew的翻译，我个人倾向于是：一组工作人员，AI是后缀。那么，crewAI意思是说这是一组由AI构成的工作人员。</p>
<p>那么很自然地用通俗易懂的语言来讲，crewAI其实就是一个小团队，这个小团队的成员由AI构成，它们扮演不同的角色，彼此交流协作来完成复杂的任务。如果需要，还可以设置一个AI作为领导来统筹管理。未来还将可以让他们内部进行民主投票决策，这一功能还在开发。</p>
<h1 id="为什么选择crewai">为什么选择crewAI？</h1>
<p>其实同样的功能用LangChain就能做，它能做得更加个性化，可以定制不同的需求。crewAI其实就是基于LangChain打造的。而crewAI的特点是它更简单，它将LangChain的代码封装简化了。他们的关系就像PS之于美图秀秀等P图软件，都是用来P图的，但是PS更加专业，能满足更多的个性化需求，而美图秀秀等，是封装了固定的美颜模板、滤镜，简化了用户的操作，降低了学习成本。</p>
<p>我没那么多个性化需求，目前只需要用crewAI就够了。</p>
<h1 id="crewai的学习笔记">crewAI的学习笔记</h1>
<p>学习笔记整理自<a href="https://www.crewai.com/">crewAI官网</a>。</p>
<p>这个网站还自己利用AI工具，开发了<code>Chat with our Docs</code>功能。</p>
<p>有什么问题可以直接问它，更高效。这才是好的应用嘛！</p>
<h2 id="核心概念">核心概念</h2>
<h3 id="代理人agents">代理人Agents</h3>
<p>简单来说，代理人我们可以理解为AI扮演的人，你可以创建很多个擅长不同事情的代理人。</p>
<p>你可以通过设定参数来塑造出合适的人来达成你的目标。</p>
<ul>
<li>你必须交代的：</li>
</ul>
<p>你要交代任务背景（Backstory）。</p>
<p>告诉它的角色是什么或者它擅长做什么（Role）。</p>
<p>它的目标是做什么（Goal）。</p>
<ul>
<li>你选择性交代的：</li>
</ul>
<p>它能使用的工具有哪些（Tools）。</p>
<p>它在被迫给出最佳答案前最多“思考”多少次（Max Iter）。</p>
<p>它使用的大语言模型（LLM、Function Calling LLM）。</p>
<p>它需不需要记录自己执行的过程（Verbose）。</p>
<p>是否允许它自己把任务委托给其他更合适的代理人（Allow Delegation）。</p>
<p>它是否有记忆（Memory）。</p>
<p>它执行每一步操作后后需要干什么（Step Callback）。</p>
<ul>
<li>例子</li>
</ul>
<pre><code class="language-python">from crewai import Agent   #导入crewai的代理人模块
#创建代理人、塑造它！
agent = Agent(
  role='Data Analyst',
  goal='Extract actionable insights',
  backstory=&quot;&quot;&quot;You're a data analyst at a large company.
  You're responsible for analyzing data and providing insights
  to the business.
  You're currently working on a project to analyze the
  performance of our marketing campaigns.&quot;&quot;&quot;,
  tools=[my_tool1, my_tool2],  # Optional, defaults to an empty list
  llm=my_llm,  # Optional
  function_calling_llm=my_llm,  # Optional
  max_iter=15,  # Optional
  max_rpm=None, # Optional
  verbose=True,  # Optional
  allow_delegation=True,  # Optional
  step_callback=my_intermediate_step_callback,  # Optional
  memory=True  # Optional
)
</code></pre>
<h3 id="任务tasks">任务Tasks</h3>
<p>简单来说，任务是上面的代理人们要一起完成的事情。</p>
<ul>
<li>你必须要交代的：</li>
</ul>
<p>你要简明扼要地交代任务是什么（Description）。</p>
<p>明确且详细地讲出任务预期的成果是什么（Expected Output）。</p>
<ul>
<li>你选择性交代的：</li>
</ul>
<p>你可以指定具体某个代理人来负责这个任务（Agent），如果没指定，crewAI会自己决定。</p>
<p>代理们执行任务时可以利用的工具（Tools）。</p>
<p>本任务的上游任务（Context），就是本任务的执行依赖于哪些任务。比如把大象塞进冰箱只需要三步：打开冰箱门、把大象塞进去、关上冰箱门，但如果你没有打开冰箱门，是无法把大象塞冰箱里，更不用说关上冰箱门了。</p>
<p>是否允许代理人不等待整体任务完成后，再继续执行自己的任务（Async Execution）。这对于需要很长时间才能完成的任务，或者对于接下来要执行的任务并不重要的任务非常有用。比如，第一个任务是搜集数据，第二个是分析数据，如果需要等待，那么就是任务一任务二循环执行。如果不需要等待，那可能是，执行任务一，任务二在执行时，任务一再次执行。</p>
<p>任务的结果保存到什么文件（Output File）中。</p>
<p>任务结束后需要额外做什么（Callback）？</p>
<h3 id="工具tools">工具Tools</h3>
<p>简单来说，正如我们所知道的，如果代理人只是由大语言模型构成，那么他们其实只能做问答，并在彼此之间互相问答。这并没有什么了不起的。而工具是让整个工作流变牛逼的关键。</p>
<p>工具是一种技能或者功能，它可以交给代理来使用。来源包括crewAI、LangChain提供的工具，以及你自己开发的工具。</p>
<p>例如：爬虫、读写本地文件、搜索github代码等非常丰富，可以自行了解。</p>
<h3 id="流程processes">流程Processes</h3>
<p>简单来说，就是代理人们执行任务的流程。</p>
<p>目前有两种，还有一种正在开发。</p>
<ul>
<li>顺序流程（Sequential）</li>
</ul>
<p>一件件任务按顺序完成。</p>
<ul>
<li>分级管理（Hierarchical）</li>
</ul>
<p>任务分级管理，指定一个AI扮演管理者，这个管理者来统筹协调其他代理人来完成任务。最好使用GPT4等，目前最牛逼的模型。</p>
<h3 id="一组工作人员crews">一组工作人员Crews</h3>
<p>简单来说，就是一组代理人，他们一起完成任务。要有代理人，要有明确的任务，要有执行的流程。其实就是把上面的东西打包在一起，攒局，让他们成为一个团队做事。</p>
<h3 id="协作collaboration">协作Collaboration</h3>
<p>简单来说，就是代理人之间如何互相协作。</p>
<p>他们会信息共享（Information Sharing），会互相协助（Task Assistance），于是当一个代理发现自己做不太好，会向更专业的伙伴求助。自动进行资源分配（Resource Allocation）。</p>
<ul>
<li>PS：creaAI支持多语言。</li>
</ul>
<p>核心的东西基本已经讲完了，其他细节的可以自己去了解，官方提供了很多<a href="https://github.com/joaomdmoura/crewAI-examples/tree/main">例子</a>。其中我比较感兴趣的是<a href="https://github.com/joaomdmoura/crewAI-examples/tree/main/stock_analysis">stock_analysis</a>,它会爬取雅虎金融新闻来分析。</p>



  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2024/03/11/%E4%BA%A4%E6%98%93%E7%AC%94%E8%AE%B0%E9%80%BB%E8%BE%91/">交易笔记——板块逻辑</a></span>
  <span class="nav-next"></span>
</nav>





<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/math-code.js" defer></script>
<script src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>

<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.js" defer></script>

  







<script src="//cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js,npm/@xiee/utils/js/load-highlight.js" defer></script>



  
  <hr>
  <div class="copyright">© <a href="https://zhufeng.netlify.app/">珠峰</a> 2024-2024 | <a href="https://github.com/zhufeng7">Github</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

